Instale o Docker Desktop

Tudo se inicia no Makefile

Com make up, ele cria toda a infra do Airflow necessária

O arquivo docker-compose.yml é obtido da documentação oficial do Airflow para uso com Docker:
    https://airflow.apache.org/docs/apache-airflow/stable/howto/docker-compose/index.html


Após a instalação, use http://localhost:8080/ no navegador

Usuário e senha são airflow / airflow

Comando para permitir acesso a pastas criadas para o Airflow: sudo chown -R $(id -u):$(id -g) dags logs plugins config

Ao rodar make up, tudo que estiver nas pastas dags, logs, plugins e config irão ser refletidas no dentro container. Ver em volumes dentro do arquivo docker-compose.yaml:
volumes:
    - ${AIRFLOW_PROJ_DIR:-.}/dags:/opt/airflow/dags
    - ${AIRFLOW_PROJ_DIR:-.}/logs:/opt/airflow/logs
    - ${AIRFLOW_PROJ_DIR:-.}/config:/opt/airflow/config
    - ${AIRFLOW_PROJ_DIR:-.}/plugins:/opt/airflow/plugins

Tudo que for salvo nas respectivas pastas dentro do container irão refletir nas pastas da máquina local

Há um comando sed para adicionar ao volume montado a pasta data, onde os dados serão persistidos e refletidos na pasta local

Usar o Airflow no Docker para peristir dados na máquina local

Explicar que os logs serão gerados em tempo de execução e coletados para uso no Grafana ou Datadog

Parâmetros do Airflow: raw_final_path, raw_file_name, url_api, silver_path, gold_path

Preparação de ambiente

make make virtual_env
source .venv/bin/activate
make requirements


make unit_tests: Utilizado para testar as funções
